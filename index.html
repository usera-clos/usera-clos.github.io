<!DOCTYPE html>
<html lang="en">
    <head>
		<meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <title>薪火红色文创产品讲解</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta name="description" content="Fullscreen Slit Slider with CSS3 and jQuery" />
        <meta name="keywords" content="slit slider, plugin, css3, transitions, jquery, fullscreen, autoplay" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="../favicon.ico"> 
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/custom.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		<script type="text/javascript" src="js/modernizr.custom.79639.js"></script>
		<noscript>
			<link rel="stylesheet" type="text/css" href="css/styleNoJS.css" />
		</noscript>
		<style>
			.audioText{
				display: none;
			}
			.tipText{
				display: block;
			}
		</style>
    </head>
    <body>

		<div class="container demo-1">
					<!-- 播放按钮 -->
					<button id="playButton">
						<i class="fas fa-play"></i>
					</button>
					<audio id="audioPlayer">
						<source src="./audio/he.mp3" type="audio/mpeg">
						Your browser does not support the audio element.
					</audio>
					<img id="icon" src="./images/tu.png" alt="悬浮图片" class="floating-image">
					<div class="speech-bubble" id="speechBubble">
						<p id="tip"   class="tipText">点击右侧按钮播放语音讲解</p>
						<p id="text1" class="audioText">大家好，我是红小兔，今天给大家讲一下，薪火红色文创产品的灵感来源小故事。星星之火可以燎原的故事。</p>
						<p id="text2" class="audioText">1929年1月，大雪过后，井冈山寒冷。毛泽东建立根据地，革命力量发展壮大。国民党反动派先后向井冈山发起三次“会剿”。</p>
						<p id="text3" class="audioText">面对严峻形势，毛泽东等决定，彭德怀的红五军留守井冈山，毛泽东、朱德率领红四军主力3600多人，离开井冈山，出击赣南。</p>
						<p id="text4" class="audioText">为了避免硬拼和争取主动，红四军主力在赣南流动作战。流动作战是艰难的。一天，毛泽东、朱德率领部队在寻乌圳下村宿营。</p>
						<p id="text5" class="audioText">国民党军一部来偷袭。习惯夜间工作的毛泽东和朱德等还没有来得及起床，就陷入敌军的包围之中。</p>
						<p id="text6" class="audioText">一时，四面枪声大作，红军勇猛突围，跟敌人进行了一场肉搏战。毛泽东与贺子珍由警卫员掩护，蹚水过河，突围上山。</p>
						<p id="text7" class="audioText">在这么艰难的环境中，毛泽东和朱德率领红四军依然没有放弃在运动中调动敌人，使其兵力分散，以便红军能够在有利时机集中兵力歼其一部，恢复主动地位。</p>
						<p id="text8" class="audioText">1929年4月，红四军前委在瑞金接到中共中央2月发出的致红四军前委的信(即中央《二月来信》)。</p>
						<p id="text9" class="audioText">信中依据共产国际的指示，对国内革命形势作出了悲观的估计，主张“将红军的武装力量分成小部队的组织散入湘赣边境各乡村中进行和深入土地革命”</p>
						<p id="text10" class="audioText">同时，要求朱德、毛泽东两个人必须离开红四军。毛泽东代表前委回信中央，指出关于中央在来信中提出的“分兵”和朱、毛离队问题，</p>
						<p id="text11" class="audioText">红四军前委多数同志都持反对态度。毛泽东在信中说：“中央要我们将队伍分得很小，散在农村中，朱、毛离开队伍，隐匿大的目标，</p>
						<p id="text12" class="audioText">目的在于保存红军力量和发动群众，这是一种不切实际的想法。”中央收到此信后，在周恩来的努力下，没有坚持原议，朱、毛因此没有离开红四军。</p>
						<p id="text13" class="audioText">然而，中央《二月来信》在红军中产生了很不好的影响。1930年元旦，时任红四军第一纵队纵队长林彪致信毛泽东，</p>
						<p id="text14" class="audioText">信中主张大敌当前，红四军应分散去打游击，各自找出路。信中过高估计了敌人的军事力量，弥漫着一股悲观情绪。</p>
						<p id="text15" class="audioText">早在1929年底“古田会议”后，毛泽东就开始重视党内和军内弥漫的悲观情绪。当他看到林彪的“新年贺信”后，</p>
						<p id="text16" class="audioText">觉得这是一个非常好的机会，他希望通过回复林彪来信的方式，阐明他对中国革命和红军前途的看法，清除党内军内的消极情绪。</p>
						<p id="text17" class="audioText">1930年1月5日，毛泽东利用难得的战斗间隙，在古田赖坊一家店铺的阁楼上，秉烛夜书，写下一封长信，即后来的《星星之火，可以燎原》。</p>
						<p id="text18" class="audioText">大家好,我是黄小龙,今天给大家讲一下，薪火红色文创产品的灵感来源小故事。红船故事。</p>
						<p id="text19" class="audioText">1921年7月，中国共产党第一次全国代表大会在上海秘密举行。因遭到上海法租界巡捕袭扰，会议被迫中止。但代表们并没有退缩，</p>
						<p id="text20" class="audioText">而是将会议的地点转移到浙江嘉兴南湖的一艘船上，完成了大会的最后议程。这次会议结束后，代表们把革命的火种带向全国各地。</p>
						<p id="text21" class="audioText">从此，中国革命的航船从南湖扬帆启航，中国的历史开启了全新的篇章。</p>
						<p id="text22" class="audioText">为纪念中共一大在嘉兴南湖胜利闭幕这一重大历史事件，1959年，南湖革命纪念馆建成开放，以湖中烟雨楼作为馆址，</p>
						<p id="text23" class="audioText">按照当年中共一大代表乘坐的游船样式仿制的红船纪念船正式下水，向世人展出。20世纪60年代，中共一大代表董必武两次重访南湖，</p>
						<p id="text24" class="audioText">写下了“烟雨楼台革命萌生，此间曾著星星火；风云世界逢春蛰起，到处皆闻殷殷雷”的感慨。改革开放后,</p>
						<p id="text25" class="audioText">党和国家领导人亲切关怀党的诞生地，或瞻仰红船，或亲笔题词，勉励我们“沿着南湖红船开辟的革命航道奋勇前进”。</p>
					</div>
            <div id="slider" class="sl-slider-wrapper">
				<div class="sl-slider">
					<div class="sl-slide bg-1" data-orientation="horizontal" data-slice1-rotation="-25" data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">
						<div id="bgImg" class="sl-slide-inner">

						</div>
					</div>
				</div><!-- /sl-slider -->
	
			</div><!-- /slider-wrapper -->

        </div>
		<script src="https://s1.pstatp.com/cdn/expire-1-M/jquery/1.8.3/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.ba-cond.min.js"></script>
		<script type="text/javascript" src="js/jquery.slitslider.js"></script>
		<script type="text/javascript">
		// 获取音频元素和播放按钮
        const textSegments = document.getElementsByClassName('audioText');
		const audioPlayer = document.getElementById('audioPlayer');
		const playButton = document.getElementById('playButton');
		const bgImg = document.getElementById('bgImg');
		const icon = document.getElementById('icon');
		const tip =document.getElementById('tip');
		
		// 监听播放按钮的点击事件
		playButton.addEventListener('click', function() {
		// 如果音频已暂停，则播放音频
		const speechBubble = document.getElementById('speechBubble');
		if (audioPlayer.paused) {
			audioPlayer.play();
			playButton.innerHTML = '<i class="fas fa-pause"></i>'; // 暂停图标
			tip.style.display='none';
			
		} else { // 否则暂停音频
			audioPlayer.pause();
			playButton.innerHTML = '<i class="fas fa-play"></i>'; // 播放图标
			// //暂停时,对话更新暂停,图片切换暂停
		}
		});
		  // Define time segments and associated text
		const timeSegments = [
			{ start: 0, end: 9.2,  textId: 'text1',  imgId:'./images/tu-tak-1.jpeg'},
			{ start: 9.2, end: 27, textId: 'text2',  imgId:'./images/tu-tak-2.jpeg'},
			{ start: 27, end: 38.3, textId: 'text3', imgId:'./images/tu-tak-2.jpeg'},
			{ start: 38.3, end: 50.18, textId: 'text4', imgId:'./images/tu-tak-3.jpeg'},
			{ start: 50.18, end: 59.15, textId: 'text5', imgId:'./images/tu-tak-3.jpeg'},
			{ start: 59.15, end: 70.18, textId: 'text6', imgId:'./images/tu-tak-4-5.png'},
			{ start: 70.18, end: 84.23, textId: 'text7', imgId:'./images/tu-tak-4-5.png'},
			{ start: 84.23, end: 94.10, textId: 'text8', imgId:'./images/tu-tak-4-5.png'},
			{ start: 94.10, end: 107.16, textId: 'text9', imgId:'./images/tu-tak-6-7.png'},
			{ start: 107.16, end: 119.08, textId: 'text10',imgId:'./images/tu-tak-6-7.png'},
			{ start: 119.08, end: 131.15, textId: 'text11',imgId:'./images/tu-tak-6-7.png'},
			{ start: 131.15, end: 142.13, textId: 'text12',imgId:'./images/tu-tak-81.jpeg'},
			{ start: 142.13, end: 152.10, textId: 'text13',imgId:'./images/tu-tak-81.jpeg'},
			{ start: 152.10, end: 162.18, textId: 'text14',imgId:'./images/tu-tak-8.jpeg'},
			{ start: 162.18, end: 172.06, textId: 'text15',imgId:'./images/tu-tak-8.jpeg'},
			{ start: 172.06, end: 183.21, textId: 'text16',imgId:'./images/tu-tak-8.jpeg'},
			{ start: 183.21, end: 196.06, textId: 'text17',imgId:'./images/tu-tak-9-10.jpg'},
			{ start: 196.06, end: 204.09, textId: 'text18',imgId:'./images/hc-10.jpg'},
			{ start: 204.09, end: 216.19, textId: 'text19',imgId:'./images/hc-2.jpeg'},
			{ start: 216.19, end: 227.12, textId: 'text20',imgId:'./images/hc-3.jpeg'},
			{ start: 227.12, end: 233.23, textId: 'text21',imgId:'./images/hc-4.jpeg'},
			{ start: 233.23, end: 244.10, textId: 'text22',imgId:'./images/hc-5.jpeg'},
			{ start: 244.10, end: 256.21, textId: 'text23',imgId:'./images/hc-6.jpg'},
			{ start: 256.21, end: 265.26, textId: 'text24',imgId:'./images/hc-7.jpg'},
			{ start: 265.26, end: 276.03, textId: 'text25',imgId:'./images/hc-8.jpg'},
			// Add more time segments as needed
		];
		function preloadImage(url, callback) {
			const img = new Image();
			img.onload = callback;
			img.src = url;
			}
		  // Function to display text based on current audio time
		  function displayText() {
    		const currentTime = audioPlayer.currentTime;
			for (let segment of timeSegments) {
			if (currentTime >= segment.start && currentTime <= segment.end) {
				let textToShow = document.getElementById(segment.textId);
				textToShow.style.display = 'block';
				preloadImage(segment.imgId,()=>{
					bgImg.style.backgroundImage = 'url(' + segment.imgId + ')';
				})
				if(currentTime>=196.06){
				    icon.src='./images/long.png';
				}
				if(currentTime>=0&&currentTime<=196.06){
				    icon.src='./images/tu.png';
				}
			} else {
				let textToHide = document.getElementById(segment.textId);
				textToHide.style.display = 'none';
			}
			}
		}
		// Event listener for timeupdate event of audio element
		audioPlayer.addEventListener('timeupdate', displayText);

		audioPlayer.addEventListener('ended',()=>{
			playButton.innerHTML = '&#9658;';
			tip.style.display='block';
			tip.innerHTML='您可以点击按钮重新播放'
		})
		const interval = 
			$(function() {
				var Page = (function() {
					var $navArrows = $( '#nav-arrows' ),
						$nav = $( '#nav-dots > span' ),
						slitslider = $( '#slider' ).slitslider( {
							onBeforeChange : function( slide, pos ) {
								$nav.removeClass( 'nav-dot-current' );
								$nav.eq( pos ).addClass( 'nav-dot-current' );
							}
						} ),
						init = function() {
							initEvents();
						},
						initEvents = function() {
							// add navigation events
							$navArrows.children( ':last' ).on( 'click', function() {
								slitslider.next();
								return false;
							} );
							$navArrows.children( ':first' ).on( 'click', function() {
								slitslider.previous();
								return false;

							} );
							$nav.each( function( i ) {
								$( this ).on( 'click', function( event ) {
									var $dot = $( this );
									if( !slitslider.isActive() ) {
										$nav.removeClass( 'nav-dot-current' );
										$dot.addClass( 'nav-dot-current' );
									
									}
									slitslider.jump( i + 1 );
									return false;
								} );
							} );
						};
						return { init : init };
				})();
				Page.init();
			
			});
		</script>
	</body>
</html>